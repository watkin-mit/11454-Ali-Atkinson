<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title> Migration's Mutual Benefits </title>
   	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
  <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"> </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.1.1/d3.min.js"></script>
  <!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Load color scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Create a div where the graph will take place -->
<!-- A bit of CSS: change stroke color of circle on hover (white -> black) -->
    <style>
    .bubbles {
      stroke-width: 2px;
      stroke: white;
    }
    .bubbles:hover {
      stroke: black;
    }

		p {
			font-family: 'Lora', sans-serif;
      text-align:justify;
			color:#3C393E;
			font-weight:300;
      /*    	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500" rel="stylesheet">
*/
		}

		svg {
		}

		h1 {
      font-family: 'Lora', sans-serif;
			font-size:60px;
			font-weight:400;
			line-height:1.3;
      color: #B18742;
		}

    h2 {
      font-family: 'Lora', sans-serif;
      font-size:36px;
      font-style: italic;
      font-weight:100;
      color: #B18742;
    }

    h3 {
      font-family: 'Lora', sans-serif;
      font-size:20px;
      font-weight:80;
      color: #B18742;
    }

    h4 {
      font-family: 'Lora', sans-serif;
      font-size:20px;
      font-weight:80;
      color: #695195;
    }

    a {
        color: #695195;
        font-weight:400;
        text-decoration: underline;
        font-weight: bold;
      }

		#firstvisualdiv{
          position: -webkit-sticky;
          position: sticky;
          top: -1px;
          transition: opacity 0.8s;
         -webkit-transition: opacity 0.8s;

    	}

      #firstvisualdiv2 {
          position: -webkit-sticky;
          position: sticky;
          top: -1px;
          transition: opacity 0.8s;
         -webkit-transition: opacity 0.8s;
          }


    #secondvisualdiv {
          position: -webkit-sticky;
          position: sticky;
          top: -1px;
          transition: opacity 0.8s;
         -webkit-transition: opacity 0.8s;
        }

        #secondvisualdiv2 {
              position: -webkit-sticky;
              position: sticky;
              top: -1px;
              transition: opacity 0.8s;
             -webkit-transition: opacity 0.8s;
            }

   .img{
    max-width: 100%;
    max-height: 100%;
    position: relative;
    opacity: 0;
    transition: opacity 0.8s;
    -webkit-transition: opacity 0.8s;
   }

   .headerimg{
    max-width: 100%;
    height:auto;
    object-fit: cover;
    position:relative;
    z-index: 1;
    transition: opacity 0.8s;
    -webkit-transition: opacity 0.8s;
   }
/*   #sankey1 #sankey2 #sankey3 #sankey4 {
    max-width: 100%;
    max-height: 100%;
    position: fixed;
    opacity: 0;
    transition: opacity 0.8s;
    -webkit-transition: opacity 0.8s;
   }
*/

.startinvisible{
  opacity:0;
}

.invisiblebubbles{
  opacity:0;
  pointer-events: none;
}

#starttheevents{
  opacity:1;
  pointer-events: all;
}

.noevents{
  pointer-events: none;
}

#my_dataviz{
  pointer-events: all;
}

.sankeydiv{
   width:500px; /*container-width*/
   overflow:hidden; /*hide bounds of image */
   margin:0;   /*reset margin of figure tag*/
}

   #sankey1{
     position: fixed;
     z-index:4;
     top: 50vh;
     left: 45%;
         transform: translateY(-50%);
         height:75%;
     transition: opacity 0.8s;
     -webkit-transition: opacity 0.8s;
   }
   #sankey2{
     position: fixed;
     z-index:3;
     top: 50vh;
     left: 45%;
         transform: translateY(-50%);
         height:75%;
     transition: opacity 0.8s;
     -webkit-transition: opacity 0.8s;
    }
   #sankey3{
     position: fixed;
     z-index:2;
     top: 50vh;
     left: 45%;
         transform: translateY(-50%);
         height:75%;
     transition: opacity 0.8s;
     -webkit-transition: opacity 0.8s;
      }
   #sankey4{
     position: fixed;
     z-index:1;
     top: 50vh;
         left: 45%;
         transform: translateY(-50%);
         height:75%;
     transition: opacity 0.8s;
     -webkit-transition: opacity 0.8s;
      }

      #footnotefixed {
        font-size: 10px;
        position: fixed;
        top: 80vh;
        left:48%;
        z-index: 5;
      }

   #sankeyhtml {
     opacity:1;
   }

   #invisibletext #invisibletext2{
     opacity:0;
   }

   #footnote{
     font-size: 10px;
   }

   .text1opacity {
        font-size:30px;
        fill:blue;
        opacity:0;
        transition: opacity 0.8s;
         -webkit-transition: opacity 0.8s;
        }

         #footnoteb3 {
           font-size: 10px;
           position: fixed;
           top: 45vh;
           left:10%;
           z-index: -5;
          }

          #headerb1 {
            font-size: 20px;
            position: fixed;
            top: 30vh;
            left:50%;
            z-index: 5;
            transition: opacity 0.8s;
             -webkit-transition: opacity 0.8s;
           }

           #headerb2 {
             font-size: 20px;
             position: fixed;
             top: 30vh;
             left:50%;
             z-index: 5;
             transition: opacity 0.8s;
              -webkit-transition: opacity 0.8s;
            }

          #headerb3 {
            font-size: 20px;
            position: fixed;
            top: 13vh;
            left:15%;
            z-index: -5;
            transition: opacity 0.8s;
             -webkit-transition: opacity 0.8s;
           }

           #b2label1 {
             font-size: 20px;
             position: fixed;
             color: #B18742;
             top: 85vh;
             left:54%;
             z-index: 5;
             transition: opacity 0.8s;
              -webkit-transition: opacity 0.8s;
            }

            #b2label2 {
              font-size: 20px;
              position: fixed;
              color: #695195;
              top: 85vh;
              left:72%;
              z-index: 5;
              transition: opacity 0.8s;
               -webkit-transition: opacity 0.8s;
             }

             #b3label {
               font-size: 20px;
               position: fixed;
               color: #695195;
               top: 38vh;
               left:1%;
               z-index: -5;
               transition: opacity 0.8s;
                -webkit-transition: opacity 0.8s;
              }

	.active {
        	opacity:1;
    	}


    .deactive {
            opacity:0;
            pointer-events:none;
        }


    circle {
      fill: #695195;
;
    }

    /*#3C393E // to color the first one black */

#bubble1{
  position: fixed;
  z-index:4;
  top: 65vh;
  left: 45%;
  height:70%;
  transform: translateY(-50%);
  transition: opacity 0.8s;
  -webkit-transition: opacity 0.8s;
}

#bubblediv{
  position:fixed;
  z-index:8;
  top: 20vh;
  left: 25%;
}

#bubble2{
  position: fixed;
  z-index:8;
  top: 60vh;
  left: 45%;
  height:50%;
  transform: translateY(-50%);
  transition: opacity 0.8s;
  -webkit-transition: opacity 0.8s;
}

#bubble22{
  position: fixed;
  z-index:8;
  top: 60vh;
  left: 65%;
  transform: translateY(-50%);
  transition: opacity 0.8s;
  -webkit-transition: opacity 0.8s;
}


#bubble3{
  position: fixed;
  z-index:1;
  top: 50vh;
  left: 40%;
  transform: translateY(-50%);
  transition: opacity 0.8s;
  -webkit-transition: opacity 0.8s;
}

</style>


</head>
<body>
  <main role="main" class="container" >
     <div class="row">
     	<div class="col-12">
     		<br><br>
     		<h1 id="titletext"> Migration's Mutual Benefits</h1>
     	</div>
      <div class="col-12">
        <h2>Central American workers are supporting local US economies and their families back home in needed ways</h2>
        <br>
        <h3>Ilham Ali and Will Atkinson&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Scroll to continue... </h3>
        <hr>
          <img class="headerimg" src="assets/img/cover2.jpg">
          <hr>
        </div>
       </div>
      </div>
     </div>

     <div class="row">
     	<div class="col-12">

        <p > Increasing migration from the "Northern Triangle" countries of Guatemala, Honduras, and El Salvador
          has been covered widely in the popular press. But beyond sweeping statements made about immigrant groups, the dynamics of migration
            for the individual are not well understood. When conditions are right, migration can bring mutual benefits --
            supporting local economies in the U.S. as well as the migrants' families back home. </p>

      <p id="text1"> Curious? Or unconvinced? Join us to explore the numbers behind these stories. Scroll or click below to get started:   </p>

         <h3> <a href="#TheJourney"> The Journey:</a> Where migrants settle in the United States </h3>
         <h3> <a href="#LocalJobs"> Local Jobs:</a> Where migrants work in their chosen destinations </h3>
         <h3> <a href="#FamilyNeeds"> Family Needs:</a> How migrants support their faraway homes </h3>


      <br><br>
     	<br><br>
      <br><br>
      <br><br>
    </div>

     	<div class="col-4">

        <h3 id="TheJourney"> The Journey </h3>

        <p id="text2">Immigrants from Guatemala, Honduras, and El Salvador go on to live in varied places across the United States.</p>
        <p> These people most often settle in Los Angeles County, California and Harris County, Texas (home to Houston). </p>
       <p>  Many also live near Washington, D.C. or in southern Florida. Each area has varying cultures, lifestyles, and cost of living. </p>
      <p>  The map details the top three U.S. counties that are now home for Northern Triangle migrants -- while showing just a fraction of the <a href="https://www.migrationpolicy.org/programs/data-hub/charts/us-immigrant-population-state-and-county">3 million U.S. immigrants</a> from these nations. </p>
      <p> Their heritage and skills enrich communities across the U.S. -- including tens to hundreds of thousands of jobs in some areas. </p>

     <br><br>
     <br><br>
     <br><br>
     <br><br>
     	</div>

       	<div class="col-8">
          <div id="secondvisualdiv">
                  <img class="img" src="assets/img/map1104.png">
                  <p id="footnote"> Source: Migration Policy Institute (via the 2015-2019 American Community Survey) </p>

       		</div>
       	</div>


     <div class="col-4">
       <h3 id="LocalJobs"> Local Jobs </h3>

       <p id="text50"> These incoming workers are increasingly essential to U.S. economies.
         H-2A visas for immigrant farm workers have <a href="https://blog.civicdatadesignlab.mit.edu/h2a:-america's-essential-yet-unknown-program"> tripled in less than a decade</a>,
          and more than half of farm businesses would be at least “somewhat likely” to go out of business without them
         (according to <a href="https://usafarmlabor.com/"> USA Farm Labor</a> surveys).
         Immigrants could play an <a href="https://www.cgdev.org/publication/harnessing-northern-triangle-migration-mutual-benefit">even larger role in the future</a>,
         as U.S. labor projections point to rising demand for entry-level needs in health, food services and more. </p>

     <p id="text51">According to <a href=http://migration.mit.edu/assets/mpi-wfp-mit_migration-motivations-costs_final.pdf> recent survey data</a> from the United Nations World Food Programme (UN WFP),
       more than half of the Northern Triangle migrants surveyed have continued their past type of work.
       These workers bring valuable experience to their destinations, while others find new roles entirely.
       Data shows that unemployment is very low among these populations -- under 1% in most cases -- and a small fraction of the U.S. average as a whole.
       These, and other transitions in work lifestyle, represent big changes for the migrants who experience them. </p>
     <br><br>
     <br><br>
      <br><br>
      <br><br>
      <br><br>
      <p id="text52"> Agriculture shows this range of outcomes -- as the most common work type before migration but not after.
        Central American countries receive just a small fraction of H-2A farm worker visas, despite the experience of these past farmworkers.
        As a result, some past farm workers move to informal labor sectors, such as chicken plants and factories --
        while others become salaried employees in other sectors like transportation.   </p>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <p id="text53"> In destination countries like the U.S., informal work is the most common result, attracting migrants across their previous work types. </p>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <p id="text54"> And a large number of students find employment upon arrival, making their early entrance into the workforce and starting careers. </p>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <p id="invisibletext"> . </p>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <p id="textsankeyhtml"> Want to dig deeper? Explore for yourself by hovering over the image with your cursor. These paths reflect the past and present journeys of more than 1,300 Northern Triangle migrants --
      as surveyed by the UN World Food Programme in 2021. Nearly all chose the United States as their destination, though precise locations were not reported for privacy reasons. </p>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
      <br><br>
     </div>

     <div class="col-8">

       <div class="sankeydiv">
         <br><br>
         <img class="startinvisible" id="sankey1" src="assets/img/PROJ_sankey.png" style="z-index: 4"/>
         <img class="startinvisible" id="sankey2" src="assets/img/PROJ_sankey_Agriculture.png" style="z-index: 3"/>
         <img class="startinvisible" id="sankey3" src="assets/img/PROJ_sankey_Informal_work.png" style="z-index: 2"/>
         <img class="startinvisible" id="sankey4" src="assets/img/PROJ_sankey_Student.png" style="z-index: 1"/>
         <p class="startinvisible" id="footnotefixed"> Source: UN WFP Survey (2021). Responses of "Does not apply", "Other", or "NS / NR" (blank) are not shown. </p>
       </div>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <div class="startinvisible" id="sankeyhtml">
         <iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plotly.com/~watkin/6.embed" height="525" width="100%"></iframe>
               <p id="footnote"> Source: UN WFP Survey (2021). Responses of "Does not apply", "Other", or "NS / NR" (blank) are not included in the diagram. </p>
       </div>
     </div>
   </div>

   <div class="row">

     <div class="col-4">

       <h3 id="FamilyNeeds"> Family Needs </h3>
       <br><br>
       <p id="textb1"> Having found work in their new community, migrants often send money to their families back home in the form of remittances. </p>
       <br><br>
       <p> But how does this look in practice? Let's consider a worker's income, represented by this series of bubbles.</p>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>
       <br><br>

       <p id="textb2"> <a href=https://news.un.org/en/story/2019/06/1040581> According to the UN,</a>
         just 15% of migrants' earnings are sent to families on average --
         meaning that the vast majority can benefit the local economies where they work. </p>
         <br><br>
         <p>
          Nonetheless, remittances are a critical income source for many relatives back home --
                  supporting <a href=https://news.un.org/en/story/2019/06/1040581>one in nine families globally</a>
                 and about one in four in the UN WFP survey
                  of Northern Triangle households.     </p>

        <br><br>
        <br><br>
        <br><br>
        <br><br>
        <br><br>
        <br><br>


         <p id="textb3"> The vast majority of these households use remittances for basic needs like food, health, and utility services. </p>
         <br><br>
         <p> Of the survey's 1300+ households that received remittances, nearly 90% noted food among their uses. </p>
         <br><br>
         <p> Hover over the visual to learn more... </p>
     </div>

     <div class="col-8">

        <div>
          <p id="headerb1" class="invisiblebubbles"> Of a worker's income... </p>
          <img class="invisiblebubbles" id="bubble1" src="assets/img/bubble1.png">

          <p id="headerb2" class="invisiblebubbles"> Most stays local, while some is sent back to families... </p>
          <img class="invisiblebubbles" id="bubble2" src="assets/img/bubble2.png">

            <p id="b2label1" class="invisiblebubbles"> Local economy </p>
            <p id="b2label2" class="invisiblebubbles"> Remittance to family </p>


       </div>


         <div id="remittancebubbles">
               <div class="invisiblebubbles" id="bubble3">
                 <p id="headerb3">...Where most households use the money for basic needs. </p>


                 <div id="my_dataviz" class="noevents" >

                 </div>

                  <p id="b3label"> Housing  Education Health &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      Food Purchase  &nbsp; &nbsp; &nbsp; &nbsp;  Utilities &nbsp;  &nbsp;   Clothes  &nbsp;Saving</p>

                  <br><br>
                  <p id="footnoteb3"> Source: UN WFP Survey (2021). Responses of "Does not apply", "Other", or "NS / NR" (blank) are not included in the diagram.
                  <br> Percents represent the fraction of respondents who reported use of that spending category.
                  <br> The total exceeds 100% because one could select multiple choices. </p>
                </div>
         </div>
     </div>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <p id="invisibletext2"> . </p>
   <br><br>
   <br><br>
   <br><br>
   <br><br>
   <br><br>

 </div>


   <div class="row">
     <div class="col-12">
       <h3> Final Thoughts </h3>
       <p id="textf">
       By understanding the journey of migration to a new location, career, and lifestyle, we can start to learn more about the major transitions these people face.
       While migration is never an easy choice, there can be benefits across countries under the right circumstances.
       <br><br>
       What's next for this issue? By highlighting the immense challenge of migration and employment, <a href=http://migration.mit.edu/about.html> these findings could support calls</a> for social protection programs
       (to stabilize home country conditions) as well as <a href=https://www.cgdev.org/sites/default/files/harnessing-northern-triangle-migration-for-mutual-benefit.pdf> improved legal pathways</a> for those who do wish to migrate.
       And to maximize the benefits of remittances to families in need, <a href=https://www.un.org/development/desa/pd/sites/www.un.org.development.desa.pd/files/201802_unpd_cm16_wb_remittance_costs.pdf> reducing remittance transaction costs</a> could play an important role.
       <br><br>
       You can find more details about the survey data -- and their broader implications -- in the following links.
     </p>
     <br><br>
     </div>
    </div>

   <div class="row">

     <div class="col-2">

       <h3> Learn more </h3>

       <p>  <a href=http://migration.mit.edu/> Project Website</a>   </p>
       <p>  <a href=http://migration.mit.edu/assets/mpi-wfp-mit_migration-motivations-costs_final.pdf> Full Report</a>   </p>
       <p>  <a href=https://fb.watch/9sHn4wpz3b/> Launch Presentation </a>   </p>

     </div>

     <div class="col-10">
       <h3> Acknowledgments </h3>
       <p style="font-size:13px"> This website represents our final project for MIT's Fall 2021 course in Big Data, Visualization and Society (11.454).<br>
         We greatly appreciate the guidance of Ashley Louie, Niko McGlashan, Alberto Meouchi, Professor Sarah Williams, and the full teaching staff.<br>
         We also received helpful feedback from Rosella Bottone and others from the course partners at the UN WFP and Migration Policy Institute.  </p>

     </div>
   </div>

   <br><br>
  </div>

  </main><!-- /.container -->

</body>

<script type="text/javascript">
    var controller = new ScrollMagic.Controller();
/*
    new ScrollMagic.Scene({triggerElement: "#titletext"})
        .setClassToggle("#sankey1", "deactive")
        .addTo(controller);

        new ScrollMagic.Scene({triggerElement: "#titletext"})
            .setClassToggle("#sankey2", "deactive")
            .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#titletext"})
                .setClassToggle("#sankey3", "deactive")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#titletext"})
                    .setClassToggle("#sankey4", "deactive")
                    .addTo(controller);
*/

    	new ScrollMagic.Scene({triggerElement: "#text1"})
        	.setClassToggle(".text1opacity", "active")
        	.addTo(controller);

          new ScrollMagic.Scene({triggerElement: "#text2"})
              .setClassToggle("#firstvisualdiv", "deactive")
              .addTo(controller);

    	new ScrollMagic.Scene({triggerElement: "#text2"})
        	.setClassToggle("#secondvisualdiv", "active")
        	.addTo(controller);

      new ScrollMagic.Scene({triggerElement: "#text2"})
          .setClassToggle(".img", "active")
          .addTo(controller);
/*
          new ScrollMagic.Scene({triggerElement: "#text2"})
              .setClassToggle("#firstvisualdiv2", "deactive")
              .addTo(controller);
*/
		new ScrollMagic.Scene({triggerElement: "#text50"})
        	.setClassToggle("#secondvisualdiv", "deactive")
        	.addTo(controller);

    /*      new ScrollMagic.Scene({triggerElement: "#text45"})
              .setClassToggle("#secondvisualdiv2", "deactive")
              .addTo(controller);
*/
            new ScrollMagic.Scene({triggerElement: "#text51"})
                .setClassToggle("#h-work", "active")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#text51"})
                    .setClassToggle("#sankey1", "active")
                    .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#text51"})
                        .setClassToggle("#footnotefixed", "active")
                        .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#text52"})
                    .setClassToggle("#firstvisualdiv2", "deactive")
                    .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#text52"})
                        .setClassToggle("#sankey1", "deactive")
                        .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#text52"})
                    .setClassToggle("#sankey2", "active")
                    .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#text53"})
                .setClassToggle("#sankey2", "deactive")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#text53"})
                    .setClassToggle("#sankey3", "active")
                    .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#text54"})
                .setClassToggle("#sankey3", "deactive")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#text54"})
                    .setClassToggle("#sankey4", "active")
                    .addTo(controller);

              new ScrollMagic.Scene({triggerElement: "#invisibletext"})
                  .setClassToggle("#sankey4", "deactive")
                  .addTo(controller);

                  new ScrollMagic.Scene({triggerElement: "#invisibletext"})
                      .setClassToggle("#footnotefixed", "deactive")
                      .addTo(controller);

                  new ScrollMagic.Scene({triggerElement: "#textsankeyhtml"})
                      .setClassToggle("#sankeyhtml", "active")
                      .addTo(controller);

        new ScrollMagic.Scene({triggerElement: "#textb1"})
            .setClassToggle("#sankeyhtml", "deactive")
            // .setClassToggle("#sankey4", "active")
            .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#textb1"})
                .setClassToggle("#headerb1", "active")
                // .setClassToggle("#sankey4", "active")
                .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#textb1"})
                .setClassToggle("#bubble1", "active")
                // .setClassToggle("#sankey4", "active")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#textb2"})
                    .setClassToggle("#headerb1", "deactive")
                    // .setClassToggle("#sankey4", "active")
                    .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#textb2"})
                    .setClassToggle("#bubble1", "deactive")
                    // .setClassToggle("#sankey4", "active")
                    .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#textb2"})
                        .setClassToggle("#headerb2", "active")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

                        new ScrollMagic.Scene({triggerElement: "#textb2"})
                            .setClassToggle("#b2label1", "active")
                            // .setClassToggle("#sankey4", "active")
                            .addTo(controller);

                            new ScrollMagic.Scene({triggerElement: "#textb2"})
                                .setClassToggle("#b2label2", "active")
                                // .setClassToggle("#sankey4", "active")
                                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#textb2"})
                    .setClassToggle("#bubble2", "active")
                    // .setClassToggle("#sankey4", "active")
                    .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#textb2"})
                        .setClassToggle("#bubble22", "active")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#textb2"})
                        .setClassToggle("#bubblediv", "active")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#textb3"})
                        .setClassToggle("#headerb2", "deactive")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);


                    new ScrollMagic.Scene({triggerElement: "#textb3"})
                        .setClassToggle("#b2label1", "deactive")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

                        new ScrollMagic.Scene({triggerElement: "#textb3"})
                            .setClassToggle("#b2label2", "deactive")
                            // .setClassToggle("#sankey4", "active")
                            .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#textb3"})
                        .setClassToggle("#bubble2", "deactive")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

                        new ScrollMagic.Scene({triggerElement: "#textb3"})
                            .setClassToggle("#bubble22", "deactive")
                            // .setClassToggle("#sankey4", "active")
                            .addTo(controller);

                        new ScrollMagic.Scene({triggerElement: "#textb3"})
                            .setClassToggle("#bubblediv", "deactive")
                            // .setClassToggle("#sankey4", "active")
                            .addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#textb3"})
                .setClassToggle("#bubble3", "active")
                // .setClassToggle("#sankey4", "active")
                .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#textb3"})
                    .setClassToggle("#my_dataviz", "active")
                    // .setClassToggle("#sankey4", "active")
                    .addTo(controller);

                new ScrollMagic.Scene({triggerElement: "#invisibletext2"})
                    .setClassToggle("#bubble3", "deactive")
                    // .setClassToggle("#sankey4", "active")
                    .addTo(controller);

                    new ScrollMagic.Scene({triggerElement: "#invisibletext2"})
                        .setClassToggle("#my_dataviz", "deactive")
                        // .setClassToggle("#sankey4", "active")
                        .addTo(controller);

// BUBBLE D3 SCRIPT

var width1 = 400, height1 = 400
var numNodes1 = 50
var nodes1 = d3.range(numNodes1).map(function(d) {
	return {radius: 20}
})

var simulation1 = d3.forceSimulation(nodes1)
	.force('charge', d3.forceManyBody().strength(5))
	.force('center', d3.forceCenter(width1 / 2, height1 / 2))
	.force('collision', d3.forceCollide().radius(function(d) {
		return d.radius
	}))
	.on('tick', ticked1);

function ticked1() {
	var u = d3.select('#bubble1')
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")")
		.selectAll('circle')
		.data(nodes1)
		.join('circle')
		.attr('r', function(d) {
			return d.radius
		})
    .style('fill', '#3C393E')
		.attr('cx', function(d) {
			return d.x
		})
		.attr('cy', function(d) {
			return d.y
		})
}


// 85-15 scripts
/*
var width = 700, height = 400;
var colorScale = ['lightgreen', 'cadetblue', '#B19CD9'];
var xCenter = [ 300, 500];

var numNodes = 50;
var nodes = d3.range(numNodes).map(function(d, i) {
	return {
		radius: 20,
		category: [i %2]
	}
});

var simulation = d3.forceSimulation(nodes)
	.force('charge', d3.forceManyBody().strength(5))
	.force('x', d3.forceX().x(function(d) {
		return xCenter[d.category];
	}))
	.force('collision', d3.forceCollide().radius(function(d) {
		return d.radius;
	}))
	.on('tick', ticked);

function ticked() {
	var b2 = d3.select('#bubble2')
		.selectAll('circle')
		.data(nodes)
		.join('circle')
		.attr('r', function(d) {
			return d.radius;
		})
		.style('fill', function(d) {
			return colorScale[d.category];
		})
		.attr('cx', function(d) {
			return d.x;
		})
		.attr('cy', function(d) {
			return d.y;
		});
}
*/

// the 85 part of 85-15
var width = 400, height = 400
var numNodes = 43
var nodes = d3.range(numNodes).map(function(d) {
	return {radius:20}
})

var simulation = d3.forceSimulation(nodes)
	.force('charge', d3.forceManyBody().strength(5))
	.force('center', d3.forceCenter(width / 2, height / 2))
	.force('collision', d3.forceCollide().radius(function(d) {
		return d.radius
	}))
	.on('tick', ticked);

function ticked() {
	var u = d3.select('#bubble2')
		.selectAll('circle')
		.data(nodes)
		.join('circle')
    .style('fill', '#B18742')
		.attr('r', function(d) {
			return d.radius
		})

		.attr('cx', function(d) {
			return d.x
		})
		.attr('cy', function(d) {
			return d.y
		})
}

// the 15% part of the chart
var width2 = 400, height2 = 400

var numNodes2 = 7
var nodes2 = d3.range(numNodes2).map(function(d) {
	return {radius: 20}
})

var simulation2 = d3.forceSimulation(nodes2)
	.force('charge', d3.forceManyBody().strength(5))
	.force('center', d3.forceCenter(width2 / 2, height2 / 2))
	.force('collision', d3.forceCollide().radius(function(d) {
		return d.radius
	}))
	.on('tick', ticked2);

function ticked2() {
	var u = d3.select('#bubble22')
		.selectAll('circle')
		.data(nodes2)
		.join('circle')
		.attr('r', function(d) {
			return d.radius
		})
		.attr('cx', function(d) {
			return d.x
		})
		.attr('cy', function(d) {
			return d.y
		})
}





// remittance uses script

//radiusData is an array containing the new radius for the circle elements
  circleData = [[10, "rgb(246, 239, 247)"], [15, "rgb(189,201,225)"],

  [20, "rgb(103,169,207)"], [25, "rgb(28,144,153)"], [30, "rgb(1,108,89)"]];

  //Select the div element
  selectExample = d3.select("#data_example2");

  //We'll select all the circle from within the selected <div> element
  selectExample.selectAll("circle")
    .data(circleData)
    .attr("r", function(d){return d[0]})
    .style("fill", function(d){return d[1]});



// THE NEW HOVER FIGURE

    // set the dimensions and margins of the graph
    var margin = {top: 10, right: 20, bottom: 30, left: 50},
        width = 750 - margin.left - margin.right,
        height = 420 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg3 = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

    //Read the data
    d3.csv("https://raw.githubusercontent.com/argentinaali1/123/main/remittanceuses2.csv", function(data) {

      // Add X axis
      var x = d3.scaleLinear()
        .domain([0, 40])
        .range([ 0, width ]);


      // Add Y axis
      var y = d3.scaleLinear()
        .domain([2.5, 3.5])
        .range([ height, 0]);


      // Add a scale for bubble size
      var z = d3.scaleLinear()
        .domain([0, 60])
        .range([ 10,70]);


      // Add a scale for bubble color
      var myColor = d3.scaleOrdinal()
        .domain(["Housing", "Education", "Health", "Food", "Utilities", "Clothes", "Saving"])
        .range(d3.schemeCategory20c);


      // -1- Create a tooltip div that is hidden by default:
      var tooltip = d3.select("#my_dataviz")
        .append("div")
          .style("opacity", 0)
          .attr("class", "tooltip")
          .style("background-color", "black")
          .style("border-radius", "5px")
          .style("padding", "10px")
          .style("color", "white")

      // -2- Create 3 functions to show / update (when mouse move but stay on same circle) / hide the tooltip
      var showTooltip = function(d) {
        tooltip
          .transition()
          .duration(200)
        tooltip
          .style("opacity", 1)
          .html("Remittance Use: " + d.name + ", Survey Percent: " + d.percents )
          .style("left", (d3.mouse(this)[0]+30) + "px")
          .style("top", (d3.mouse(this)[1]+30) + "px")
      }
      var moveTooltip = function(d) {
        tooltip
          .style("left", (d3.mouse(this)[0]+30) + "px")
          .style("top", (d3.mouse(this)[1]+30) + "px")
      }
      var hideTooltip = function(d) {
        tooltip
          .transition()
          .duration(200)
          .style("opacity", 0)
      }

      // Add dots
  svg3.append('g')
    .selectAll("dot")
    .data(data)
    .enter()
    .append("circle")
      .attr("class", "bubbles")
      .attr("cx", function (d) { return x(d.len); } )
      .attr("cy", function (d) { return y(d.y); } )
      .attr("r", function (d) { return z(d.radius); } )
      .style("fill", '#695195' )
    // -3- Trigger the functions
    .on("mouseover", showTooltip )
    .on("mousemove", moveTooltip )
    .on("mouseleave", hideTooltip )

  })




/*
var width = 300, height = 300
var nodes = [{}, {}, {}, {}, {}]


function ticked() {
	d3.select('svg')
		.selectAll('circle')
		.data(nodes)
		.join('circle')
		.attr('r', 5)
		.attr('cx', function(d) {
			return d.x
		})
		.attr('cy', function(d) {
			return d.y
		});
}

*/

</script>
</body>
</html>
